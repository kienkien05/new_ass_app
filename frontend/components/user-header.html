<!-- User Header Component -->
<div class="mx-auto max-w-[1440px] px-4 lg:px-10 flex items-center justify-between gap-4 h-full relative">
    <div class="flex items-center gap-8 flex-1">
        <!-- Logo -->
        <a class="flex items-center gap-2 group shrink-0" href="home.html">
            <img src="../../assets/image/favicon.png"
                class="size-9 rounded-xl transition-transform group-hover:scale-110"
                alt="EViENT Logo" />
            <h2
                class="text-xl font-bold tracking-tight text-slate-900 dark:text-white group-hover:text-primary transition-colors hidden sm:block">
                EViENT</h2>
        </a>

        <!-- Desktop Navigation -->
        <nav
            class="hidden xl:flex items-center gap-1 bg-gray-100 dark:bg-surface-dark/50 p-1 rounded-xl border border-gray-200 dark:border-white/5">
            <a data-page="home"
                class="nav-link px-4 py-1.5 rounded-lg text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-white hover:bg-white dark:hover:bg-white/10 text-sm font-semibold transition-all"
                href="home.html">Trang chủ</a>
            <a data-page="events"
                class="nav-link px-4 py-1.5 rounded-lg text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-white hover:bg-white dark:hover:bg-white/10 text-sm font-semibold transition-all"
                href="events.html">Sự kiện</a>
            <a data-page="wallet"
                class="nav-link px-4 py-1.5 rounded-lg text-slate-600 dark:text-gray-400 hover:text-slate-900 dark:hover:text-white hover:bg-white dark:hover:bg-white/10 text-sm font-semibold transition-all"
                href="ticket-wallet.html">Ví vé</a>
        </nav>

        <!-- Search Bar (Desktop) -->
        <div class="hidden md:flex flex-1 max-w-md relative group">
            <div
                class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400 group-focus-within:text-primary transition-colors">
                <span class="material-symbols-outlined text-[20px]">search</span>
            </div>
            <input
                class="w-full bg-gray-50 dark:bg-[#18181b] border border-gray-200 dark:border-gray-700 text-slate-900 dark:text-white text-sm rounded-xl py-2.5 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all placeholder:text-gray-400"
                placeholder="Tìm kiếm sự kiện..." />
        </div>
    </div>

    <!-- Header Actions -->
    <div class="flex items-center gap-3">
        <!-- Actions Group -->
        <div class="flex flex-row items-center gap-2 border-r border-gray-200 dark:border-[#27272a] pr-3 mr-1">
            <!-- Dark Mode Toggle -->
            <button
                class="flex items-center justify-center size-10 rounded-xl hover:bg-gray-100 dark:hover:bg-[#27272a] text-slate-500 dark:text-gray-400 hover:text-slate-900 dark:hover:text-yellow-400 transition-all"
                onclick="toggleDarkMode()">
                <span class="material-symbols-outlined dark:hidden text-[22px]">dark_mode</span>
                <span class="material-symbols-outlined hidden dark:block text-[22px] filled-icon">light_mode</span>
            </button>

            <!-- Notifications -->
            <div class="relative">
                <button id="btn-notifications"
                    class="relative flex items-center justify-center size-10 rounded-xl hover:bg-gray-100 dark:hover:bg-[#27272a] text-slate-500 dark:text-gray-400 hover:text-slate-900 dark:hover:text-white transition-all">
                    <span class="material-symbols-outlined text-[22px]">notifications</span>
                </button>
                <span id="notification-badge" class="absolute top-2 right-2 flex size-2.5">
                    <span
                        class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                    <span
                        class="relative inline-flex rounded-full size-2.5 bg-red-500 border-2 border-white dark:border-[#09090b]"></span>
                </span>

                <!-- Notification Dropdown -->
                <div id="notification-dropdown"
                    class="hidden absolute top-full right-0 mt-3 w-96 md:w-[32rem] bg-white dark:bg-surface-dark rounded-2xl shadow-xl border border-gray-100 dark:border-[#27272a] overflow-hidden origin-top-right transition-all transform scale-95 opacity-0 z-50">
                    <div class="flex items-center justify-between p-4 border-b border-gray-100 dark:border-[#27272a]">
                        <h3 class="font-bold text-slate-900 dark:text-white">Thông báo</h3>
                        <a href="#" class="text-xs font-medium text-primary hover:text-primary-hover">Đánh dấu đã
                            đọc</a>
                    </div>

                    <div class="max-h-[400px] overflow-y-auto">
                        <!-- Item 1 (Unread) -->
                        <div
                            class="flex gap-3 p-3 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors cursor-pointer group relative">
                            <div class="size-2 rounded-full bg-primary absolute top-5 right-3"></div>
                            <div
                                class="size-10 rounded-full bg-primary/10 text-primary flex items-center justify-center shrink-0">
                                <span class="material-symbols-outlined text-[20px]">confirmation_number</span>
                            </div>
                            <div class="flex flex-col gap-1">
                                <p class="text-sm font-semibold text-slate-900 dark:text-white line-clamp-1">Đặt vé
                                    thành công!</p>
                                <p class="text-xs text-slate-500 dark:text-gray-400 line-clamp-2">Bạn đã đặt thành công
                                    2 vé cho sự kiện "Lights of Saigon 2025". Kiểm tra ví vé ngay.</p>
                                <p class="text-[10px] text-gray-400 mt-1">Vừa xong</p>
                            </div>
                        </div>

                        <!-- Item 2 (Read) -->
                        <div
                            class="flex gap-3 p-3 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors cursor-pointer group">
                            <div
                                class="size-10 rounded-full bg-green-500/10 text-green-500 flex items-center justify-center shrink-0">
                                <span class="material-symbols-outlined text-[20px]">check_circle</span>
                            </div>
                            <div class="flex flex-col gap-1">
                                <p class="text-sm font-medium text-slate-900 dark:text-white line-clamp-1">Thanh toán
                                    hoàn tất</p>
                                <p class="text-xs text-slate-500 dark:text-gray-400 line-clamp-2">Giao dịch #123456 đã
                                    được xử lý thành công qua VNPay.</p>
                                <p class="text-[10px] text-gray-400 mt-1">1 giờ trước</p>
                            </div>
                        </div>

                        <!-- Item 3 (Read) -->
                        <div
                            class="flex gap-3 p-3 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors cursor-pointer group">
                            <div
                                class="size-10 rounded-full bg-orange-500/10 text-orange-500 flex items-center justify-center shrink-0">
                                <span class="material-symbols-outlined text-[20px]">local_fire_department</span>
                            </div>
                            <div class="flex flex-col gap-1">
                                <p class="text-sm font-medium text-slate-900 dark:text-white line-clamp-1">Sự kiện sắp
                                    diễn ra</p>
                                <p class="text-xs text-slate-500 dark:text-gray-400 line-clamp-2">Sự kiện "Tech Summit
                                    2025" sẽ bắt đầu vào ngày mai. Đừng bỏ lỡ!</p>
                                <p class="text-[10px] text-gray-400 mt-1">5 giờ trước</p>
                            </div>
                        </div>
                    </div>

                    <div class="p-2 border-t border-gray-100 dark:border-[#27272a] bg-gray-50/50 dark:bg-white/5">
                        <a href="#"
                            class="flex items-center justify-center w-full py-2 text-xs font-semibold text-slate-600 dark:text-gray-300 hover:text-primary transition-colors">
                            Xem tất cả thông báo
                        </a>
                    </div>
                </div>
            </div>

            <!-- Auth View: Guest -->
            <div id="auth-guest" class="hidden items-center gap-3">
                <a href="../auth/login.html"
                    class="hidden sm:flex items-center justify-center rounded-xl h-10 px-5 text-slate-600 dark:text-gray-300 font-bold text-sm hover:text-primary transition-colors">
                    Đăng nhập
                </a>
                <a href="../auth/login.html?mode=register"
                    class="flex items-center justify-center rounded-xl h-10 px-5 bg-primary hover:bg-primary-hover text-white text-sm font-bold transition-all shadow-[0_4px_10px_rgba(28,100,242,0.2)] hover:shadow-[0_4px_15px_rgba(28,100,242,0.4)] hover:-translate-y-0.5">
                    Đăng ký
                </a>
            </div>

            <!-- Auth View: Logged In (Profile Block) -->
            <div id="auth-user" class="hidden relative">
                <button id="profile-btn"
                    class="flex items-center gap-3 p-1 pl-1 pr-3 rounded-full border border-transparent hover:border-gray-200 dark:hover:border-[#3f3f46] hover:bg-gray-50 dark:hover:bg-[#27272a] transition-all group">
                    <!-- Avatar (Left) -->
                    <div class="relative size-10 rounded-full bg-cover bg-center ring-2 ring-transparent group-hover:ring-primary/20 transition-all"
                        style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAggTPPC-VJLFbPIso4uEt0triz2WXHOj-USUpKMJkfr7SVv9Mg2uRVvQ6Y4BRfXXzjR4NsWI6r-tT7Vc_zE1VQSDrOPcwzE4kmSpJjEQvv1qRvp_aaHxAowyfzf0i9_xn99E_mhij0C3GExRofoHOGW1is0Ap1iY0PUwEwqTIpFPaP6CMGtA_6tvEEP_64guKzoYCT54Y31IGTW3aQPGaWyO-14A70VwzKYp_WvXd7mZ-EUGjrrLLmnz-_3kFWm2sO2onBAfjDNT4");'>
                        <div
                            class="absolute bottom-0 right-0 size-3 bg-green-500 rounded-full border-2 border-white dark:border-[#09090b]">
                        </div>
                    </div>

                    <!-- Text Info (Right) -->
                    <div class="hidden lg:flex flex-col items-start text-left ml-1">
                        <span class="text-sm font-bold text-slate-900 dark:text-white leading-tight">Xin chào, Admin
                            User</span>
                        <span
                            class="text-[10px] uppercase font-bold text-primary dark:text-white tracking-wider bg-primary/10 px-1.5 rounded mt-0.5">Admin</span>
                    </div>

                    <!-- Chevron -->
                    <div
                        class="hidden lg:flex items-center justify-center size-6 text-slate-400 group-hover:text-primary transition-colors ml-1">
                        <span class="material-symbols-outlined text-[20px]">keyboard_arrow_down</span>
                    </div>
                </button>

                <!-- Dropdown Menu -->
                <div id="profile-dropdown"
                    class="hidden absolute top-full right-0 mt-2 w-64 bg-white dark:bg-surface-dark rounded-2xl shadow-xl border border-gray-100 dark:border-[#27272a] overflow-hidden origin-top-right transition-all transform scale-95 opacity-0 z-50">
                    <!-- User Info (Mobile Only) -->
                    <div
                        class="lg:hidden p-4 border-b border-gray-100 dark:border-[#27272a] bg-gray-50/50 dark:bg-white/5">
                        <p class="font-bold text-slate-900 dark:text-white">Admin User</p>
                        <p class="text-xs text-slate-500">admin@evient.com</p>
                    </div>

                    <div class="p-2 space-y-1">
                        <a href="profile.html"
                            class="flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-white/5 hover:text-primary transition-colors">
                            <span class="material-symbols-outlined text-[20px]">person</span>
                            Thông tin tài khoản
                        </a>
                    </div>
                    <div class="border-t border-gray-100 dark:border-[#27272a] p-2">
                        <button onclick="window.updateHeaderState(false)"
                            class="w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors">
                            <span class="material-symbols-outlined text-[20px]">logout</span>
                            Đăng xuất
                        </button>
                    </div>
                </div>
            </div>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn"
                class="xl:hidden flex items-center justify-center size-10 rounded-xl bg-gray-100 dark:bg-[#27272a] text-slate-900 dark:text-white hover:bg-gray-200 dark:hover:bg-[#2a2a45] transition-colors">
                <span class="material-symbols-outlined">menu</span>
            </button>
        </div>
    </div>

    <!-- Mobile Menu Dropdown -->
    <div id="mobile-menu"
        class="hidden xl:hidden absolute top-full left-0 right-0 bg-white dark:bg-[#09090b] border-b border-gray-200 dark:border-[#222f49] shadow-2xl z-40 transition-all origin-top">
        <nav class="flex flex-col p-4 gap-2">
            <a data-page="home"
                class="nav-link-mobile flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 dark:text-gray-400 hover:bg-primary/5 hover:text-primary dark:hover:bg-primary/10 dark:hover:text-primary transition-colors"
                href="home.html">
                <span class="material-symbols-outlined text-[20px]">home</span>
                <span class="text-sm font-medium">Trang chủ</span>
            </a>
            <a data-page="events"
                class="nav-link-mobile flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 dark:text-gray-400 hover:bg-primary/5 hover:text-primary dark:hover:bg-primary/10 dark:hover:text-primary transition-colors"
                href="events.html">
                <span class="material-symbols-outlined text-[20px]">calendar_month</span>
                <span class="text-sm font-medium">Sự kiện</span>
            </a>
            <a data-page="wallet"
                class="nav-link-mobile flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 dark:text-gray-400 hover:bg-primary/5 hover:text-primary dark:hover:bg-primary/10 dark:hover:text-primary transition-colors"
                href="ticket-wallet.html">
                <span class="material-symbols-outlined text-[20px]">confirmation_number</span>
                <span class="text-sm font-medium">Ví vé</span>
            </a>

            <div class="border-t border-gray-100 dark:border-[#27272a] my-2 pt-2">
                <!-- Mobile Search -->
                <label class="flex flex-col h-11 mb-3">
                    <div
                        class="flex w-full flex-1 items-stretch rounded-xl h-full overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-[#18181b]">
                        <div class="text-gray-400 flex items-center justify-center pl-4">
                            <span class="material-symbols-outlined text-[20px]">search</span>
                        </div>
                        <input
                            class="flex w-full min-w-0 flex-1 text-slate-900 dark:text-white focus:outline-0 bg-transparent placeholder:text-gray-400 px-3 text-sm"
                            placeholder="Tìm kiếm..." />
                    </div>
                </label>
            </div>
        </nav>
    </div>